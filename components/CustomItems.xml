<?xml version="1.0" encoding="utf-8" ?>

<component name="CustomItems" extends="StandardDialog" initialFocus="buttonArea" >

<script type="text/brightscript" >
<![CDATA[
function init()
    print "Creating CustomItems"

    m.buttonArea = m.top.findNode("buttonArea")
    m.top.observeFieldScoped("buttonFocused", "printFocusButton")
    m.top.observeFieldScoped("buttonSelected", "printSelectedButtonAndClose")
    m.top.observeFieldScoped("wasClosed", "wasClosedChanged")

    m.barcodeItem = m.top.findNode("barcodeItem")
    m.barcodeItem.observeField("width", "barcodeWidthChanged")
end function

sub printFocusButton()
    print "m.buttonArea button ";m.buttonArea.getChild(m.top.buttonFocused).text;" focused"
end sub

sub printSelectedButtonAndClose()
    print "m.buttonArea button ";m.buttonArea.getChild(m.top.buttonSelected).text;" selected"
    m.top.close = true
end sub

sub wasClosedChanged()
    print "ActionCards Closed"
end sub

sub barcodeWidthChanged()
    print "Barcode width changed to ";m.barcodeItem.width
end sub

]]>
</script>

<children>
    <StdDlgTitleArea primaryTitle="Custom Item Dialog Example" />
    <StdDlgContentArea>
        <StdDlgTextItem text="Here is an example of custom items in a dialog: a barcode and labels within nested LayoutGroups" />
        <StdDlgCustomItem>
            <LayoutGroup layoutDirection="vert" itemSpacings="[20,10]">
            	 <LayoutGroup layoutDirection="horiz" itemSpacings="[20,10]">
            		<Label text="Scan this barcode to receive an offer" color="theme:StandardDialogSecondaryTextColor" />
            	</LayoutGroup>
            	<LayoutGroup layoutDirection="horiz" vertAlignment="bottom" itemSpacings="[20,10]">
            		<Barcode id="barcodeItem" text="Q12344567890" />
					<Label width="300" wrap="true" text="Check your email for the offer" color="theme:StandardDialogSecondaryTextColor" />            	
				</LayoutGroup>
            </LayoutGroup>
    	</StdDlgCustomItem>
    </StdDlgContentArea>
    <StdDlgButtonArea id="buttonArea">
        <StdDlgButton text="OK" />
    </StdDlgButtonArea>
</children>

</component>
